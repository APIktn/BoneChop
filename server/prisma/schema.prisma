generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

//////////////////////////////////////////////////
// USERS
//////////////////////////////////////////////////

model User {
  Id             Int      @id @default(autoincrement())
  UserCode       String   @unique @db.VarChar(20)
  UserName       String?  @db.VarChar(150)
  UserEmail      String   @db.VarChar(150)
  Password       String   @db.VarChar(150)
  FirstName      String   @db.VarChar(150)
  LastName       String   @db.VarChar(150)
  Address        String?   @db.Text
  Tel            String?   @db.VarChar(20)
  Profile_Image  String   @db.Text
  Upload_Image   String?  @db.Text
  CreateBy       String   @db.VarChar(20)
  CreateDateTime DateTime @db.DateTime
  UpdateBy       String   @db.VarChar(20)
  UpdateDateTime DateTime @db.DateTime

  @@map("tbl_mas_users")
}

//////////////////////////////////////////////////
// PRODUCT HEADER
//////////////////////////////////////////////////

model ProductHeader {
  Id             Int       @id @default(autoincrement())
  ProductCode    String    @unique @db.VarChar(150)
  ProductName    String    @db.VarChar(255)
  ProductDes     String    @db.Text
  CreateBy       String    @db.VarChar(20)
  CreateDateTime DateTime  @db.DateTime
  UpdateBy       Int
  UpdateDateTime DateTime  @db.DateTime

  images ProductImage[]
  lines  ProductLine[]

  @@map("tbl_trs_product_header")
}

//////////////////////////////////////////////////
// PRODUCT IMAGE
//////////////////////////////////////////////////

model ProductImage {
  Id              Int      @id @default(autoincrement())
  IdRef           Int
  ImageType       String   @db.VarChar(50)
  ProductImage    String   @db.Text
  ProductImageId  String   @db.Text
  CreateBy        String   @db.VarChar(20)
  CreateDateTime  DateTime @db.Date
  UpdateBy        String   @db.VarChar(20)
  UpdateDateTime  DateTime @db.Date

  header ProductHeader @relation(fields: [IdRef], references: [Id], onDelete: Cascade, onUpdate: Cascade)

  @@map("tbl_trs_product_image")
}

//////////////////////////////////////////////////
// PRODUCT LINE
//////////////////////////////////////////////////

model ProductLine {
  Id             Int      @id @default(autoincrement())
  IdRef          Int
  LineNo         Int
  Size           String   @db.VarChar(150)
  Price          Decimal  @db.Decimal(10, 2)
  Amount         Int
  Note           String   @db.Text
  CreateBy       String   @db.VarChar(20)
  CreateDateTime DateTime @db.DateTime
  UpdateBy       String   @db.VarChar(20)
  UpdateDateTime DateTime @db.DateTime

  header ProductHeader @relation(fields: [IdRef], references: [Id], onDelete: Cascade, onUpdate: Cascade)

  @@map("tbl_trs_product_line")
}
